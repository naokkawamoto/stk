<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>案件管理（スケジュール）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- Bootstrap CSS (5系) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.min.css" rel="stylesheet" />
  <!-- カスタムCSS -->
  <link rel="stylesheet" href="../style.css">
  <style>
    /* iPhone 17 Pro 393×852向け最適化 */
    body, html {
      width: 393px;
      height: 852px;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      overflow-y: auto;
    }
    .container-fluid {
      max-width: 393px;
      padding-bottom: 70px;
      margin-top: 0.5rem;
    }
    .small-text { font-size: 0.7rem; }
    .project-title { white-space: nowrap; font-size: 0.9rem; }
    .gantt-container { overflow-x: auto; }
    .gantt-table { font-size: 0.5rem; border-collapse: collapse; min-width: 800px; }
    .gantt-table th, .gantt-table td { border: 1px solid #dee2e6; padding: 1px; text-align: center; vertical-align: middle; line-height: 1.1; }
    .gantt-table th { background-color: #f8f9fa; white-space: nowrap; }
    .gantt-table .task-name { text-align: left; white-space: nowrap; min-width: 60px; background-color: #fff; font-size: 0.5rem; }
    .gantt-table .contractor { text-align: left; white-space: nowrap; min-width: 50px; font-size: 0.45rem; color: #6c757d; }
    .gantt-table .type-col { width: 20px; font-size: 0.45rem; }
    .gantt-table .day-col { width: 12px; min-width: 12px; font-size: 0.45rem; }
    .gantt-bar-planned { height: 4px; background-color: #0d6efd; border-radius: 2px; margin: 0; }
    .gantt-bar-actual { height: 4px; background-color: #198754; border-radius: 2px; margin: 0; }
    .category-header { background-color: #fff8dc !important; font-weight: bold; text-align: left !important; font-size: 0.6rem; }
    .today-col { background-color: #fff3cd !important; }
    .today-header { background-color: #ffc107 !important; color: #000; font-weight: bold; }
    .weekend { background-color: #f8f9fa; }
    .sunday { background-color: #ffe6e6; }
    .legend-box { display: inline-block; width: 15px; height: 8px; border-radius: 2px; margin-right: 3px; }
    .progress-info { font-size: 0.55rem; }
    .progress-good { color: #198754; }
    .progress-warning { color: #fd7e14; }
    .progress-danger { color: #dc3545; }
    /* Footer fixed */
    #footer-container {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 393px;
      z-index: 1000;
    }
    #footer-container footer {
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container-fluid px-2">
    <!-- タイトル -->
    <h5 class="mb-2 mt-2 project-title fw-bold">国道９号舗装工事 <i class="bi bi-star"></i></h5>
    
    <!-- 凡例・サマリー -->
    <div class="row g-2 mb-2">
      <div class="col-12">
        <div class="card">
          <div class="card-header py-1">
            <span class="fw-bold small-text">凡例</span>
          </div>
          <div class="card-body py-2">
            <div class="d-flex gap-3 small-text">
              <span><span class="legend-box" style="background-color: #0d6efd;"></span>予定</span>
              <span><span class="legend-box" style="background-color: #198754;"></span>実績</span>
              <span><span class="legend-box" style="background-color: #ffc107;"></span>本日</span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12">
        <div class="card">
          <div class="card-header py-1">
            <span class="fw-bold small-text">進捗サマリー</span>
          </div>
          <div class="card-body py-2">
            <div class="row small-text">
              <div class="col-6 mb-2">
                <strong>全体進捗率</strong>
                <span class="fs-6 fw-bold text-primary ms-2">45%</span>
              </div>
              <div class="col-6 mb-2">
                <strong>撤去工</strong>
                <span class="progress-good fw-bold ms-2">100%</span>
              </div>
              <div class="col-6">
                <strong>アスファルト舗装工</strong>
                <span class="progress-warning fw-bold ms-2">53%</span>
              </div>
              <div class="col-6">
                <strong>区画線工</strong>
                <span class="text-muted fw-bold ms-2">0%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 工程表 -->
    <div class="card mb-2">
      <div class="card-header py-1 d-flex justify-content-between align-items-center flex-wrap">
        <span class="fw-bold small-text">工程表（ガントチャート）</span>
        <div class="mt-1">
          <span class="text-white small fw-bold bg-dark px-2 py-1 rounded" style="font-size: 0.6rem;">工期：2026/03/01 〜 2026/03/31</span>
        </div>
        <div class="mt-1">
          <button class="btn btn-sm btn-secondary me-1" style="font-size: 0.65rem; padding: 0.2rem 0.4rem;"><i class="bi bi-printer"></i> 印刷</button>
          <button class="btn btn-sm btn-success" style="font-size: 0.65rem; padding: 0.2rem 0.4rem;"><i class="bi bi-download"></i> Excel出力</button>
        </div>
      </div>
      <div class="card-body p-2 gantt-container">
        <table class="table gantt-table mb-0">
          <thead>
            <tr>
              <th rowspan="2" style="min-width: 60px;">工種</th>
              <th rowspan="2" style="min-width: 50px;">担当業者</th>
              <th rowspan="2" class="type-col">区分</th>
              <th colspan="31">2026年 3月</th>
              <th rowspan="2" style="width: 40px;">進捗</th>
            </tr>
            <tr>
              <th class="day-col weekend">1</th>
              <th class="day-col sunday">2</th>
              <th class="day-col">3</th>
              <th class="day-col">4</th>
              <th class="day-col">5</th>
              <th class="day-col">6</th>
              <th class="day-col">7</th>
              <th class="day-col weekend">8</th>
              <th class="day-col sunday">9</th>
              <th class="day-col today-header">10</th>
              <th class="day-col">11</th>
              <th class="day-col">12</th>
              <th class="day-col">13</th>
              <th class="day-col">14</th>
              <th class="day-col weekend">15</th>
              <th class="day-col sunday">16</th>
              <th class="day-col">17</th>
              <th class="day-col">18</th>
              <th class="day-col">19</th>
              <th class="day-col">20</th>
              <th class="day-col">21</th>
              <th class="day-col weekend">22</th>
              <th class="day-col sunday">23</th>
              <th class="day-col">24</th>
              <th class="day-col">25</th>
              <th class="day-col">26</th>
              <th class="day-col">27</th>
              <th class="day-col">28</th>
              <th class="day-col weekend">29</th>
              <th class="day-col sunday">30</th>
              <th class="day-col">31</th>
            </tr>
          </thead>
          <tbody>
            <!-- 撤去工 カテゴリ -->
            <tr>
              <td colspan="35" class="category-header">撤去工</td>
            </tr>
            <!-- 舗装版撤去 -->
            <tr>
              <td rowspan="2" class="task-name">舗装版撤去</td>
              <td rowspan="2" class="contractor">(株)関東建設</td>
              <td class="bg-light">予定</td>
              <td class="weekend" colspan="1"><div class="gantt-bar-planned"></div></td>
              <td class="sunday"></td>
              <td colspan="3"><div class="gantt-bar-planned"></div></td>
              <td colspan="26"></td>
              <td rowspan="2" class="progress-info progress-good">100%</td>
            </tr>
            <tr>
              <td class="bg-light">実績</td>
              <td class="weekend"><div class="gantt-bar-actual"></div></td>
              <td class="sunday"></td>
              <td colspan="3"><div class="gantt-bar-actual"></div></td>
              <td colspan="26"></td>
            </tr>
            <!-- As廃材運搬処分 -->
            <tr>
              <td rowspan="2" class="task-name">As廃材運搬処分</td>
              <td rowspan="2" class="contractor">(株)関東建設</td>
              <td class="bg-light">予定</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="5"><div class="gantt-bar-planned"></div></td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="21"></td>
              <td rowspan="2" class="progress-info progress-good">100%</td>
            </tr>
            <tr>
              <td class="bg-light">実績</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="5"><div class="gantt-bar-actual"></div></td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="21"></td>
            </tr>

            <!-- アスファルト舗装工 カテゴリ -->
            <tr>
              <td colspan="35" class="category-header">アスファルト舗装工</td>
            </tr>
            <!-- 路盤工 -->
            <tr>
              <td rowspan="2" class="task-name">路盤工</td>
              <td rowspan="2" class="contractor">東京舗装(株)</td>
              <td class="bg-light">予定</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td></td>
              <td colspan="5"><div class="gantt-bar-planned"></div></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="21"></td>
              <td rowspan="2" class="progress-info progress-good">100%</td>
            </tr>
            <tr>
              <td class="bg-light">実績</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td></td>
              <td colspan="5"><div class="gantt-bar-actual"></div></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="21"></td>
            </tr>
            <!-- 基層工 -->
            <tr>
              <td rowspan="2" class="task-name">基層工</td>
              <td rowspan="2" class="contractor">東京舗装(株)</td>
              <td class="bg-light">予定</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="4"></td>
              <td colspan="2"><div class="gantt-bar-planned"></div></td>
              <td class="sunday"><div class="gantt-bar-planned"></div></td>
              <td class="today-col"><div class="gantt-bar-planned"></div></td>
              <td colspan="2"><div class="gantt-bar-planned"></div></td>
              <td colspan="19"></td>
              <td rowspan="2" class="progress-info progress-warning">60%</td>
            </tr>
            <tr>
              <td class="bg-light">実績</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="4"></td>
              <td colspan="2"><div class="gantt-bar-actual"></div></td>
              <td class="sunday"><div class="gantt-bar-actual"></div></td>
              <td class="today-col"><div class="gantt-bar-actual"></div></td>
              <td colspan="21"></td>
            </tr>
            <!-- 表層工 -->
            <tr>
              <td rowspan="2" class="task-name">表層工</td>
              <td rowspan="2" class="contractor">東京舗装(株)</td>
              <td class="bg-light">予定</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="7"></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="5"><div class="gantt-bar-planned"></div></td>
              <td class="sunday"><div class="gantt-bar-planned"></div></td>
              <td colspan="4"><div class="gantt-bar-planned"></div></td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="6"></td>
              <td rowspan="2" class="progress-info">0%</td>
            </tr>
            <tr>
              <td class="bg-light">実績</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="7"></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="21"></td>
            </tr>

            <!-- 区画線工 カテゴリ -->
            <tr>
              <td colspan="35" class="category-header">区画線工</td>
            </tr>
            <!-- 区画線 -->
            <tr>
              <td rowspan="2" class="task-name">区画線</td>
              <td rowspan="2" class="contractor">首都圏道路(株)</td>
              <td class="bg-light">予定</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="7"></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="10"></td>
              <td colspan="5"><div class="gantt-bar-planned"></div></td>
              <td class="weekend"><div class="gantt-bar-planned"></div></td>
              <td class="sunday"></td>
              <td colspan="2"><div class="gantt-bar-planned"></div></td>
              <td rowspan="2" class="progress-info">0%</td>
            </tr>
            <tr>
              <td class="bg-light">実績</td>
              <td class="weekend"></td>
              <td class="sunday"></td>
              <td colspan="7"></td>
              <td class="sunday"></td>
              <td class="today-col"></td>
              <td colspan="21"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- フッター -->
  <div id="footer-container"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../style.js"></script>
  <script>
    fetch('site_footer.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('footer-container').innerHTML = html;
        // 案件一覧を削除（このページのみ）
        setTimeout(() => {
          const footerItems = document.querySelectorAll('#footer-container .footer-item');
          footerItems.forEach(item => {
            const link = item.querySelector('a[href="site_project_list.html"]');
            if (link) {
              item.remove();
            }
          });
        }, 100);
      });
  </script>
</body>
</html>
