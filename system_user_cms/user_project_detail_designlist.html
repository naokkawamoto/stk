<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>案件管理（現地調査）</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css" rel="stylesheet"/>
    <style>
        /* 全体左右マージン */
        .content-wrapper {
        margin: 0 auto;
        padding: 0 1rem;
        padding-bottom: 120px;
        }
        /* カードを小さく */
        .card-project {
        font-size: 0.9rem;
        }
        .card-project .card-header {
        padding: 0.6rem 0.8rem;
        }
        .card-project .card-body {
        padding: 0.7rem;
        }
        .card-project .btn {
        font-size: 0.9rem;
        padding: 0.5rem 0.7rem;
        }
        /* フッターからのマージン */
        main { padding-bottom: 80px; }
    </style>
    </head>
    <body>
    <!-- ヘッダー -->
    <div id="header-container"></div>

    <div class="content-wrapper mt-4">
        <div class="d-flex justify-content-between align-items-center mb-2">
        <div>
            <h5 class="mb-0">会社名</h5>
            <h4 class="mb-0 d-inline">案件名 <i class="bi bi-star"></i></h4>
        </div>
        <div class="text-end">
          <span class="me-2">案件フロー:</span>
          <select class="form-select form-select-sm me-2" style="width:auto; display:inline-block;">
              <option value="registration">案件登録済</option>
              <option value="investigate">現地調査済</option>
              <option value="design">プラン中</option>
              <option value="contract">契約完了</option>
              <option value="complete">他決完了</option>
              </select>
              <button class="btn btn-outline-primary btn-sm">変更</button>
          </div>
      </div>
  
      <!-- ワークフローバッジ -->
      <div class="d-flex justify-content-end mb-3">
          <span class="badge bg-light text-dark me-2">案件登録済</span>
          <span class="badge bg-light text-dark me-2">現地調査済</span>
          <span class="badge bg-primary me-2">プラン中</span>
          <span class="badge bg-light text-dark me-2">契約完了</span>
          <span class="badge bg-light text-dark me-2">他決完了</span>
      </div>

        <!-- ナビゲーションタブ -->
        <ul class="nav nav-tabs mb-4">
        <li class="nav-item"><a class="nav-link"      href="user_project_detail.html">概要</a></li>
        <li class="nav-item"><a class="nav-link" href="user_project_detail_investigate.html">現地調査</a></li>
        <li class="nav-item"><a class="nav-link active"      href="user_project_detail_designlist.html">プラン一覧</a></li>
        <li class="nav-item"><a class="nav-link"      href="user_project_detail_doc.html">お客様資料</a></li>
        <li class="nav-item"><a class="nav-link"      href="user_project_detail_chat.html">チャット <span class="badge bg-danger">5</span></a></li>
        <li class="nav-item"><a class="nav-link"      href="user_project_detail_expartner.html">外部業務依頼</a></li>
        </ul>

        <div class="container-fluid mt-4 px-3">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h3 class="mb-0">プラン一覧</h3>
            </div>
        
            <!-- 既存図作成モーダル -->
            <div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="createModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="createModalLabel">新しいプランを作成</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form id="createPlanForm" action="user_project_detail_design_create.html" method="get">
                      <div class="mb-3">
                        <label for="planName" class="form-label">プラン名</label>
                        <input type="text" class="form-control" id="planName" name="planName" placeholder="プラン名を入力してください" required>
                      </div>
                    </form>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                    <button type="submit" form="createPlanForm" class="btn btn-primary">作成</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- プラン新規作成モーダル -->
            <div class="modal fade" id="newPlanModal" tabindex="-1" aria-labelledby="newPlanModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="newPlanModalLabel">プラン新規作成</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div class="d-grid gap-3">
                      <button type="button" class="btn btn-outline-primary btn-lg" onclick="location.href='user_project_detail_create_exsitdrawing.html'">
                        <i class="bi bi-file-earmark-plus me-2"></i>
                        既存図から作成
                      </button>
                      <button type="button" class="btn btn-outline-secondary btn-lg" onclick="location.href='user_project_detail_design_create.html'">
                        <i class="bi bi-copy me-2"></i>
                        既存プランからコピーして作成
                      </button>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                  </div>
                </div>
              </div>
            </div>
        
            <!-- 切り替えボタン -->
            <div class="d-flex justify-content-end mb-3">
              <button id="panelViewBtn" class="btn btn-outline-primary me-2 active">パネル</button>
              <button id="listViewBtn" class="btn btn-outline-secondary">リスト</button>
            </div>
        
            <!-- パネル表示 -->
            <div id="panelView" class="row g-3 px-3">
              <!-- 既存図作成カード -->
              <div class="col-6 col-md-4 col-lg-3">
                <div class="card card-project h-100">
                  <div class="card-header text-center">
                    <span>既存図作成</span>
                  </div>
                  <div class="card-body d-flex align-items-center justify-content-center" style="min-height: 150px;">
                    <button class="btn btn-outline-primary btn-lg" onclick="location.href='user_project_detail_create_exsitdrawing.html'">
                      <i class="bi bi-plus-circle fs-1"></i>
                    </button>
                  </div>
                </div>
              </div>
              
              <!-- プラン1 -->
              <div class="col-6 col-md-4 col-lg-3">
                <a href="user_project_detail_design.html" class="text-decoration-none text-reset">
                  <div class="card card-project h-100">
                    <div class="card-header d-flex justify-content-end align-items-center">
                      <span>プラン１</span>
                      <span class="badge bg-success ms-1">プラン確定</span>
                      <i class="bi bi-lock-fill ms-1"></i>
                    </div>
                    <img src="../images/plan1.webp" class="card-img-top" alt="案件画像">
                  </div>
                </a>
              </div>
              
              <!-- プラン2 -->
              <div class="col-6 col-md-4 col-lg-3">
                <a href="user_project_detail_design.html" class="text-decoration-none text-reset">
                  <div class="card card-project h-100">
                    <div class="card-header d-flex justify-content-end align-items-center">
                      <span>プラン２</span>
                      <span class="badge bg-info ms-1">提案済み</span>
                      <i class="bi bi-unlock-fill ms-1"></i>
                    </div>
                    <img src="../images/plan2.webp" class="card-img-top" alt="案件画像">
                  </div>
                </a>
              </div>
              
              <!-- プラン新規作成カード -->
              <div class="col-6 col-md-4 col-lg-3">
                <div class="card card-project h-100">
                  <div class="card-header text-center">
                    <span>プラン新規作成</span>
                  </div>
                  <div class="card-body d-flex align-items-center justify-content-center" style="min-height: 150px;">
                    <button class="btn btn-outline-primary btn-lg" data-bs-toggle="modal" data-bs-target="#newPlanModal">
                      <i class="bi bi-plus-circle fs-1"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
        
            <!-- リスト表示 -->
            <div id="listView" class="table-responsive px-3" style="display:none;">
              <table class="table table-hover small-text">
                <thead class="table-light">
                  <tr>
                    <th>ステータス</th>
                    <th>会社名</th>
                    <th>案件名</th>
                    <th>担当者</th>
                    <th>期間</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="badge bg-warning">案件登録中</span></td>
                    <td>会社A</td>
                    <td>案件A</td>
                    <td>山田太郎</td>
                    <td>2025/05/01〜2025/07/31</td>
                  </tr>
                  <tr>
                    <td><span class="badge bg-success">現地調査中</span></td>
                    <td>会社B</td>
                    <td>案件B</td>
                    <td>佐藤花子</td>
                    <td>2025/04/15〜2025/06/15</td>
                  </tr>
                  <tr>
                    <td><span class="badge bg-info text-dark">プラン中</span></td>
                    <td>会社C</td>
                    <td>案件C</td>
                    <td>鈴木次郎</td>
                    <td>2025/05/10〜2025/07/10</td>
                  </tr>
                  <tr>
                    <td><span class="badge bg-warning text-dark">見積もり中</span></td>
                    <td>会社D</td>
                    <td>案件D</td>
                    <td>田中一郎</td>
                    <td>2025/05/20〜2025/07/20</td>
                  </tr>
                  <tr>
                    <td><span class="badge bg-primary text-light">資金計画中</span></td>
                    <td>会社E</td>
                    <td>案件E</td>
                    <td>伊藤三郎</td>
                    <td>2025/06/01〜2025/08/01</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        

    <!-- フッター -->
    <div id="footer-container"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- カスタムスクリプト -->
    <script src="../style.js"></script>
    <script>
        fetch('user_header.html').then(r => r.text()).then(html => document.getElementById('header-container').innerHTML = html);
        fetch('user_footer.html').then(r => r.text()).then(html => document.getElementById('footer-container').innerHTML = html);
    </script>
</body>
</html>
