<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>既存図作成システム ERD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .entity-box {
            transition: all 0.3s ease;
        }
        .entity-box:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .relationship-line {
            stroke-dasharray: 5,5;
            animation: dash 20s linear infinite;
        }
        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="w-full bg-gray-50 p-6">
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">既存図作成システム</h1>
            <p class="text-gray-600">建物の現状を記録・管理するためのデータ構造</p>
        </div>
        
        <div class="bg-white p-6 rounded-xl shadow-lg overflow-auto">
            <svg width="800" height="650" viewBox="0 0 800 650">
                <defs>
                    <marker
                        id="arrowhead"
                        markerWidth="10"
                        markerHeight="7"
                        refX="10"
                        refY="3.5"
                        orient="auto"
                        fill="#6B7280"
                    >
                        <polygon points="0 0, 10 3.5, 0 7" />
                    </marker>
                </defs>
                
                <!-- リレーションシップ線 -->
                <line x1="230" y1="100" x2="300" y2="100" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="265" y="95" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">1:N</text>
                
                <line x1="480" y1="100" x2="550" y2="100" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="515" y="95" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">1:N</text>
                
                <line x1="150" y1="180" x2="150" y2="250" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="135" y="215" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">1:N</text>
                
                <line x1="250" y1="350" x2="300" y2="300" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="275" y="325" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">1:N</text>
                
                <line x1="230" y1="150" x2="650" y2="250" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="440" y="200" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">1:N</text>
                
                <line x1="630" y1="180" x2="150" y2="450" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="390" y="315" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">1:N</text>
                
                <line x1="630" y1="180" x2="400" y2="450" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="515" y="315" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">1:N</text>
                
                <line x1="750" y1="350" x2="650" y2="450" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="700" y="400" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">N:1</text>
                
                <line x1="250" y1="550" x2="550" y2="500" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowhead)" class="relationship-line"/>
                <text x="400" y="525" text-anchor="middle" font-size="10" fill="#7C3AED" font-weight="bold">N:1</text>
                
                <!-- 建物エンティティ -->
                <rect x="50" y="50" width="180" height="190" fill="white" stroke="#3B82F6" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="50" y="50" width="180" height="35" fill="#3B82F6" rx="8"/>
                <text x="140" y="73" text-anchor="middle" fill="white" font-size="14" font-weight="bold">建物</text>
                <text x="60" y="108" font-size="11" fill="#DC2626" font-weight="bold">building_id</text>
                <text x="230" y="108" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="60" y="133" font-size="11" fill="#374151">建物名</text>
                <text x="230" y="133" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="60" y="158" font-size="11" fill="#374151">所在地</text>
                <text x="230" y="158" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="60" y="183" font-size="11" fill="#374151">構造</text>
                <text x="230" y="183" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="60" y="208" font-size="11" fill="#374151">築年数</text>
                <text x="230" y="208" text-anchor="end" font-size="9" fill="#6B7280">INT</text>
                <text x="60" y="233" font-size="11" fill="#374151">作成日</text>
                <text x="230" y="233" text-anchor="end" font-size="9" fill="#6B7280">DATE</text>

                <!-- フロアエンティティ -->
                <rect x="300" y="50" width="180" height="165" fill="white" stroke="#3B82F6" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="300" y="50" width="180" height="35" fill="#3B82F6" rx="8"/>
                <text x="390" y="73" text-anchor="middle" fill="white" font-size="14" font-weight="bold">フロア</text>
                <text x="310" y="108" font-size="11" fill="#DC2626" font-weight="bold">floor_id</text>
                <text x="480" y="108" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="310" y="133" font-size="11" fill="#0369A1" font-weight="bold">building_id</text>
                <text x="480" y="133" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="310" y="158" font-size="11" fill="#374151">フロア名</text>
                <text x="480" y="158" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="310" y="183" font-size="11" fill="#374151">階数</text>
                <text x="480" y="183" text-anchor="end" font-size="9" fill="#6B7280">INT</text>
                <text x="310" y="208" font-size="11" fill="#374151">床面積</text>
                <text x="480" y="208" text-anchor="end" font-size="9" fill="#6B7280">DECIMAL</text>

                <!-- 部屋エンティティ -->
                <rect x="550" y="50" width="180" height="165" fill="white" stroke="#3B82F6" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="550" y="50" width="180" height="35" fill="#3B82F6" rx="8"/>
                <text x="640" y="73" text-anchor="middle" fill="white" font-size="14" font-weight="bold">部屋</text>
                <text x="560" y="108" font-size="11" fill="#DC2626" font-weight="bold">room_id</text>
                <text x="730" y="108" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="560" y="133" font-size="11" fill="#0369A1" font-weight="bold">floor_id</text>
                <text x="730" y="133" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="560" y="158" font-size="11" fill="#374151">部屋名</text>
                <text x="730" y="158" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="560" y="183" font-size="11" fill="#374151">用途</text>
                <text x="730" y="183" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="560" y="208" font-size="11" fill="#374151">面積</text>
                <text x="730" y="208" text-anchor="end" font-size="9" fill="#6B7280">DECIMAL</text>

                <!-- CAD図面エンティティ -->
                <rect x="50" y="250" width="200" height="190" fill="white" stroke="#059669" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="50" y="250" width="200" height="35" fill="#059669" rx="8"/>
                <text x="150" y="273" text-anchor="middle" fill="white" font-size="14" font-weight="bold">CAD図面</text>
                <text x="60" y="308" font-size="11" fill="#DC2626" font-weight="bold">cad_id</text>
                <text x="250" y="308" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="60" y="333" font-size="11" fill="#0369A1" font-weight="bold">building_id</text>
                <text x="250" y="333" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="60" y="358" font-size="11" fill="#0369A1" font-weight="bold">floor_id</text>
                <text x="250" y="358" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="60" y="383" font-size="11" fill="#374151">図面種別</text>
                <text x="250" y="383" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="60" y="408" font-size="11" fill="#374151">CADデータ</text>
                <text x="250" y="408" text-anchor="end" font-size="9" fill="#6B7280">JSON</text>
                <text x="60" y="433" font-size="11" fill="#374151">縮尺</text>
                <text x="250" y="433" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>

                <!-- CAD要素エンティティ -->
                <rect x="300" y="250" width="200" height="165" fill="white" stroke="#059669" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="300" y="250" width="200" height="35" fill="#059669" rx="8"/>
                <text x="400" y="273" text-anchor="middle" fill="white" font-size="14" font-weight="bold">CAD要素</text>
                <text x="310" y="308" font-size="11" fill="#DC2626" font-weight="bold">element_id</text>
                <text x="500" y="308" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="310" y="333" font-size="11" fill="#0369A1" font-weight="bold">cad_id</text>
                <text x="500" y="333" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="310" y="358" font-size="11" fill="#374151">要素種別</text>
                <text x="500" y="358" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="310" y="383" font-size="11" fill="#374151">座標データ</text>
                <text x="500" y="383" text-anchor="end" font-size="9" fill="#6B7280">JSON</text>
                <text x="310" y="408" font-size="11" fill="#374151">スタイル</text>
                <text x="500" y="408" text-anchor="end" font-size="9" fill="#6B7280">JSON</text>

                <!-- 外部仕上表エンティティ -->
                <rect x="550" y="250" width="200" height="165" fill="white" stroke="#DC2626" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="550" y="250" width="200" height="35" fill="#DC2626" rx="8"/>
                <text x="650" y="273" text-anchor="middle" fill="white" font-size="14" font-weight="bold">外部仕上表</text>
                <text x="560" y="308" font-size="11" fill="#DC2626" font-weight="bold">exterior_id</text>
                <text x="750" y="308" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="560" y="333" font-size="11" fill="#0369A1" font-weight="bold">building_id</text>
                <text x="750" y="333" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="560" y="358" font-size="11" fill="#374151">仕様種別</text>
                <text x="750" y="358" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="560" y="383" font-size="11" fill="#374151">仕様詳細</text>
                <text x="750" y="383" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="560" y="408" font-size="11" fill="#374151">面積・数量</text>
                <text x="750" y="408" text-anchor="end" font-size="9" fill="#6B7280">DECIMAL</text>

                <!-- 内部仕上表エンティティ -->
                <rect x="50" y="450" width="200" height="165" fill="white" stroke="#DC2626" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="50" y="450" width="200" height="35" fill="#DC2626" rx="8"/>
                <text x="150" y="473" text-anchor="middle" fill="white" font-size="14" font-weight="bold">内部仕上表</text>
                <text x="60" y="508" font-size="11" fill="#DC2626" font-weight="bold">interior_id</text>
                <text x="250" y="508" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="60" y="533" font-size="11" fill="#0369A1" font-weight="bold">room_id</text>
                <text x="250" y="533" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="60" y="558" font-size="11" fill="#374151">仕上部位</text>
                <text x="250" y="558" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="60" y="583" font-size="11" fill="#374151">仕様詳細</text>
                <text x="250" y="583" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="60" y="608" font-size="11" fill="#374151">面積・数量</text>
                <text x="250" y="608" text-anchor="end" font-size="9" fill="#6B7280">DECIMAL</text>

                <!-- 設備情報エンティティ -->
                <rect x="300" y="450" width="200" height="165" fill="white" stroke="#7C3AED" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="300" y="450" width="200" height="35" fill="#7C3AED" rx="8"/>
                <text x="400" y="473" text-anchor="middle" fill="white" font-size="14" font-weight="bold">設備情報</text>
                <text x="310" y="508" font-size="11" fill="#DC2626" font-weight="bold">equipment_id</text>
                <text x="500" y="508" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="310" y="533" font-size="11" fill="#0369A1" font-weight="bold">room_id</text>
                <text x="500" y="533" text-anchor="end" font-size="9" fill="#6B7280">FK</text>
                <text x="310" y="558" font-size="11" fill="#374151">設備種別</text>
                <text x="500" y="558" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="310" y="583" font-size="11" fill="#374151">設備詳細</text>
                <text x="500" y="583" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="310" y="608" font-size="11" fill="#374151">位置情報</text>
                <text x="500" y="608" text-anchor="end" font-size="9" fill="#6B7280">JSON</text>

                <!-- 仕様マスタエンティティ -->
                <rect x="550" y="450" width="200" height="165" fill="white" stroke="#F59E0B" stroke-width="2" rx="8" class="entity-box"/>
                <rect x="550" y="450" width="200" height="35" fill="#F59E0B" rx="8"/>
                <text x="650" y="473" text-anchor="middle" fill="white" font-size="14" font-weight="bold">仕様マスタ</text>
                <text x="560" y="508" font-size="11" fill="#DC2626" font-weight="bold">master_id</text>
                <text x="750" y="508" text-anchor="end" font-size="9" fill="#6B7280">PK</text>
                <text x="560" y="533" font-size="11" fill="#374151">分類</text>
                <text x="750" y="533" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="560" y="558" font-size="11" fill="#374151">仕様名</text>
                <text x="750" y="558" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="560" y="583" font-size="11" fill="#374151">材料</text>
                <text x="750" y="583" text-anchor="end" font-size="9" fill="#6B7280">VARCHAR</text>
                <text x="560" y="608" font-size="11" fill="#374151">標準単価</text>
                <text x="750" y="608" text-anchor="end" font-size="9" fill="#6B7280">DECIMAL</text>
            </svg>
        </div>

        <!-- 機能説明 -->
        <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold text-gray-800 mb-4">システム概要</h3>
                <div class="space-y-3 text-sm">
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-blue-500 rounded mr-3"></div>
                        <span><strong>基本構造</strong>：建物・フロア・部屋の階層管理</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-green-600 rounded mr-3"></div>
                        <span><strong>CAD機能</strong>：図面データと要素の詳細管理</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-red-600 rounded mr-3"></div>
                        <span><strong>仕上情報</strong>：外部・内部の仕様詳細記録</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-purple-600 rounded mr-3"></div>
                        <span><strong>設備情報</strong>：電気・ガス・水道等の配置記録</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-yellow-600 rounded mr-3"></div>
                        <span><strong>マスタ管理</strong>：標準仕様と参考価格の管理</span>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold text-gray-800 mb-4">主要機能</h3>
                <div class="space-y-2 text-sm">
                    <div>✓ 建物の基本情報登録・管理</div>
                    <div>✓ フロア・部屋単位の詳細情報管理</div>
                    <div>✓ WebCADでの図面作成・編集</div>
                    <div>✓ 外部・内部仕上表の作成</div>
                    <div>✓ 設備情報の位置・仕様管理</div>
                    <div>✓ 標準仕様マスタとの連携</div>
                    <div>✓ 既存図面の正規化・データベース化</div>
                </div>
            </div>
        </div>

        <div class="mt-6 bg-blue-50 p-6 rounded-xl">
            <h3 class="text-lg font-bold text-blue-800 mb-3">次のステップ</h3>
            <p class="text-blue-700">
                この既存図データをベースに、<strong>プラン作成</strong>（複数の改修案作成・管理）と
                <strong>解体・新設積算</strong>（工事費用の自動計算）システムに展開します。
            </p>
            <div class="mt-4 flex space-x-4">
                <a href="user_project_detail_designlist.html" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="bi bi-arrow-left"></i> プラン一覧に戻る
                </a>
                <a href="user_project_detail_plan_erd.html" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">プラン作成ERDを見る</a>
                <a href="user_project_detail_estimation_erd.html" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">積算システムERDを見る</a>
            </div>
        </div>
    </div>
</body>
</html>
