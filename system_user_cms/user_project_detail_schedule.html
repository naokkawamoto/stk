<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>案件管理（スケジュール）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap CSS (5系) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons CDN -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css" rel="stylesheet" />
  <!-- カスタムCSS -->
  <link rel="stylesheet" href="../style.css">
  <style>
    .sidebar { max-height: 80vh; overflow-y: auto; }
    .col-fixed { padding-left: 0; padding-right: 0; }
    .small-text { font-size: 0.75rem; }
    .gantt-container { overflow-x: auto; }
    .gantt-table { font-size: 0.6rem; border-collapse: collapse; min-width: 1200px; }
    .gantt-table th, .gantt-table td { border: 1px solid #dee2e6; padding: 1px 2px; text-align: center; vertical-align: middle; line-height: 1.1; }
    .gantt-table th { background-color: #f8f9fa; white-space: nowrap; }
    .gantt-table .task-name { text-align: left; white-space: nowrap; min-width: 100px; background-color: #fff; font-size: 0.6rem; }
    .gantt-table .contractor { text-align: left; white-space: nowrap; min-width: 80px; font-size: 0.55rem; color: #6c757d; }
    .gantt-table .type-col { width: 30px; font-size: 0.55rem; }
    .gantt-table .day-col { width: 20px; min-width: 20px; }
    .gantt-bar-planned { height: 6px; background-color: #0d6efd; border-radius: 2px; margin: 0; }
    .gantt-bar-actual { height: 6px; background-color: #198754; border-radius: 2px; margin: 0; }
    .category-header { background-color: #fff8dc !important; font-weight: bold; text-align: left !important; }
    .today-col { background-color: #fff3cd !important; }
    .today-header { background-color: #ffc107 !important; color: #000; font-weight: bold; }
    .weekend { background-color: #f8f9fa; }
    .sunday { background-color: #ffe6e6; }
    .legend-box { display: inline-block; width: 20px; height: 10px; border-radius: 2px; margin-right: 4px; }
    .progress-info { font-size: 0.6rem; }
    .progress-good { color: #198754; }
    .progress-warning { color: #fd7e14; }
    .progress-danger { color: #dc3545; }
  </style>
</head>
<body>
  <!-- ヘッダー -->
  <div id="header-container"></div>

  <div class="container-fluid mt-4 px-4">
    <div class="row">
      <!-- 左サイドメニュー：進捗サブタブ（幅300px） -->
      <nav class="col-fixed" style="width:240px;">
        <div class="sidebar px-2">
          <div class="list-group small-text" id="overviewSubTabs" role="tablist">
            <a href="user_project_detail.html" class="list-group-item list-group-item-action">工事進捗</a>
            <a href="user_project_detail_report.html" class="list-group-item list-group-item-action">工事日誌</a>
            <a href="user_project_detail_schedule.html" class="list-group-item list-group-item-action active">スケジュール</a>
            <a href="user_project_detail_overview.html" class="list-group-item list-group-item-action">工事概要</a>
            <a href="user_project_detail_drawing.html" class="list-group-item list-group-item-action">図面</a>
            <a href="user_project_detail_budget.html" class="list-group-item list-group-item-action">予算</a>
            <a href="user_project_detail_staff.html" class="list-group-item list-group-item-action">社内担当者</a>
            <a href="user_project_detail_partner.html" class="list-group-item list-group-item-action">外部協力会社</a>
            <a href="user_project_detail_other.html" class="list-group-item list-group-item-action">資料</a>
          </div>
        </div>
      </nav>

      <!-- メインコンテンツエリア -->
      <main class="col px-3" style="padding-bottom: 80px;">
        <!-- タイトル -->
        <h4 class="mb-3 fw-bold">国道９号舗装工事 <i class="bi bi-star"></i></h4>
        
        <!-- 凡例・サマリー -->
        <div class="row g-2 mb-3">
          <div class="col-md-3">
            <div class="card h-100">
              <div class="card-header py-1">
                <span class="fw-bold small">凡例</span>
              </div>
              <div class="card-body py-2">
                <div class="d-flex gap-3 small">
                  <span><span class="legend-box" style="background-color: #0d6efd;"></span>予定</span>
                  <span><span class="legend-box" style="background-color: #198754;"></span>実績</span>
                  <span><span class="legend-box" style="background-color: #ffc107;"></span>本日</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-9">
            <div class="card h-100">
              <div class="card-header py-1">
                <span class="fw-bold small">進捗サマリー</span>
              </div>
              <div class="card-body py-2">
                <div class="row small">
                  <div class="col-md-3">
                    <strong>全体進捗率</strong>
                    <span class="fs-5 fw-bold text-primary ms-2">45%</span>
                  </div>
                  <div class="col-md-3">
                    <strong>撤去工</strong>
                    <span class="progress-good fw-bold ms-2">100%</span>
                  </div>
                  <div class="col-md-3">
                    <strong>アスファルト舗装工</strong>
                    <span class="progress-warning fw-bold ms-2">53%</span>
                  </div>
                  <div class="col-md-3">
                    <strong>区画線工</strong>
                    <span class="text-muted fw-bold ms-2">0%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 工程表 -->
        <div class="card mb-3">
          <div class="card-header py-2 d-flex justify-content-between align-items-center">
            <span class="fw-bold">工程表（ガントチャート）</span>
            <div>
              <span class="text-white small me-3 fw-bold bg-dark px-2 py-1 rounded">工期：2026/03/01 〜 2026/03/31</span>
              <button class="btn btn-sm btn-secondary me-1"><i class="bi bi-printer"></i> 印刷</button>
              <button class="btn btn-sm btn-success"><i class="bi bi-download"></i> Excel出力</button>
            </div>
          </div>
          <div class="card-body p-2 gantt-container">
            <table class="table gantt-table mb-0">
              <thead>
                <tr>
                  <th rowspan="2" style="min-width: 130px;">工種</th>
                  <th rowspan="2" style="min-width: 100px;">担当業者</th>
                  <th rowspan="2" class="type-col">区分</th>
                  <th colspan="31">2026年 3月</th>
                  <th rowspan="2" style="width: 60px;">進捗</th>
                </tr>
                <tr>
                  <th class="day-col weekend">1<br><span style="font-size:0.5rem">土</span></th>
                  <th class="day-col sunday">2<br><span style="font-size:0.5rem">日</span></th>
                  <th class="day-col">3<br><span style="font-size:0.5rem">月</span></th>
                  <th class="day-col">4<br><span style="font-size:0.5rem">火</span></th>
                  <th class="day-col">5<br><span style="font-size:0.5rem">水</span></th>
                  <th class="day-col">6<br><span style="font-size:0.5rem">木</span></th>
                  <th class="day-col">7<br><span style="font-size:0.5rem">金</span></th>
                  <th class="day-col weekend">8<br><span style="font-size:0.5rem">土</span></th>
                  <th class="day-col sunday">9<br><span style="font-size:0.5rem">日</span></th>
                  <th class="day-col today-header">10<br><span style="font-size:0.5rem">月</span></th>
                  <th class="day-col">11<br><span style="font-size:0.5rem">火</span></th>
                  <th class="day-col">12<br><span style="font-size:0.5rem">水</span></th>
                  <th class="day-col">13<br><span style="font-size:0.5rem">木</span></th>
                  <th class="day-col">14<br><span style="font-size:0.5rem">金</span></th>
                  <th class="day-col weekend">15<br><span style="font-size:0.5rem">土</span></th>
                  <th class="day-col sunday">16<br><span style="font-size:0.5rem">日</span></th>
                  <th class="day-col">17<br><span style="font-size:0.5rem">月</span></th>
                  <th class="day-col">18<br><span style="font-size:0.5rem">火</span></th>
                  <th class="day-col">19<br><span style="font-size:0.5rem">水</span></th>
                  <th class="day-col">20<br><span style="font-size:0.5rem">木</span></th>
                  <th class="day-col">21<br><span style="font-size:0.5rem">金</span></th>
                  <th class="day-col weekend">22<br><span style="font-size:0.5rem">土</span></th>
                  <th class="day-col sunday">23<br><span style="font-size:0.5rem">日</span></th>
                  <th class="day-col">24<br><span style="font-size:0.5rem">月</span></th>
                  <th class="day-col">25<br><span style="font-size:0.5rem">火</span></th>
                  <th class="day-col">26<br><span style="font-size:0.5rem">水</span></th>
                  <th class="day-col">27<br><span style="font-size:0.5rem">木</span></th>
                  <th class="day-col">28<br><span style="font-size:0.5rem">金</span></th>
                  <th class="day-col weekend">29<br><span style="font-size:0.5rem">土</span></th>
                  <th class="day-col sunday">30<br><span style="font-size:0.5rem">日</span></th>
                  <th class="day-col">31<br><span style="font-size:0.5rem">月</span></th>
                </tr>
              </thead>
              <tbody>
                <!-- 撤去工 カテゴリ -->
                <tr>
                  <td colspan="35" class="category-header">撤去工</td>
                </tr>
                <!-- 舗装版撤去 -->
                <tr>
                  <td rowspan="2" class="task-name">舗装版撤去<br><small class="text-muted">As t=10cm</small></td>
                  <td rowspan="2" class="contractor">(株)関東建設</td>
                  <td class="bg-light">予定</td>
                  <td class="weekend" colspan="1"><div class="gantt-bar-planned"></div></td>
                  <td class="sunday"></td>
                  <td colspan="3"><div class="gantt-bar-planned"></div></td>
                  <td colspan="26"></td>
                  <td rowspan="2" class="progress-info progress-good">100%</td>
                </tr>
                <tr>
                  <td class="bg-light">実績</td>
                  <td class="weekend"><div class="gantt-bar-actual"></div></td>
                  <td class="sunday"></td>
                  <td colspan="3"><div class="gantt-bar-actual"></div></td>
                  <td colspan="26"></td>
                </tr>
                <!-- As廃材運搬処分 -->
                <tr>
                  <td rowspan="2" class="task-name">As廃材運搬処分</td>
                  <td rowspan="2" class="contractor">(株)関東建設</td>
                  <td class="bg-light">予定</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="5"><div class="gantt-bar-planned"></div></td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="21"></td>
                  <td rowspan="2" class="progress-info progress-good">100%</td>
                </tr>
                <tr>
                  <td class="bg-light">実績</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="5"><div class="gantt-bar-actual"></div></td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="21"></td>
                </tr>

                <!-- アスファルト舗装工 カテゴリ -->
                <tr>
                  <td colspan="35" class="category-header">アスファルト舗装工</td>
                </tr>
                <!-- 路盤工 -->
                <tr>
                  <td rowspan="2" class="task-name">路盤工<br><small class="text-muted">RC-40 t=150</small></td>
                  <td rowspan="2" class="contractor">東京舗装(株)</td>
                  <td class="bg-light">予定</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td></td>
                  <td colspan="5"><div class="gantt-bar-planned"></div></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="21"></td>
                  <td rowspan="2" class="progress-info progress-good">100%</td>
                </tr>
                <tr>
                  <td class="bg-light">実績</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td></td>
                  <td colspan="5"><div class="gantt-bar-actual"></div></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="21"></td>
                </tr>
                <!-- 基層工 -->
                <tr>
                  <td rowspan="2" class="task-name">基層工<br><small class="text-muted">R粗粒 t=50</small></td>
                  <td rowspan="2" class="contractor">東京舗装(株)</td>
                  <td class="bg-light">予定</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="4"></td>
                  <td colspan="2"><div class="gantt-bar-planned"></div></td>
                  <td class="sunday"><div class="gantt-bar-planned"></div></td>
                  <td class="today-col"><div class="gantt-bar-planned"></div></td>
                  <td colspan="2"><div class="gantt-bar-planned"></div></td>
                  <td colspan="19"></td>
                  <td rowspan="2" class="progress-info progress-warning">60%</td>
                </tr>
                <tr>
                  <td class="bg-light">実績</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="4"></td>
                  <td colspan="2"><div class="gantt-bar-actual"></div></td>
                  <td class="sunday"><div class="gantt-bar-actual"></div></td>
                  <td class="today-col"><div class="gantt-bar-actual"></div></td>
                  <td colspan="21"></td>
                </tr>
                <!-- 表層工 -->
                <tr>
                  <td rowspan="2" class="task-name">表層工<br><small class="text-muted">密粒 t=50</small></td>
                  <td rowspan="2" class="contractor">東京舗装(株)</td>
                  <td class="bg-light">予定</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="7"></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="5"><div class="gantt-bar-planned"></div></td>
                  <td class="sunday"><div class="gantt-bar-planned"></div></td>
                  <td colspan="4"><div class="gantt-bar-planned"></div></td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="6"></td>
                  <td rowspan="2" class="progress-info">0%</td>
                </tr>
                <tr>
                  <td class="bg-light">実績</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="7"></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="21"></td>
                </tr>

                <!-- 区画線工 カテゴリ -->
                <tr>
                  <td colspan="35" class="category-header">区画線工</td>
                </tr>
                <!-- 区画線 -->
                <tr>
                  <td rowspan="2" class="task-name">区画線<br><small class="text-muted">100m以下一式</small></td>
                  <td rowspan="2" class="contractor">首都圏道路(株)</td>
                  <td class="bg-light">予定</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="7"></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="10"></td>
                  <td colspan="5"><div class="gantt-bar-planned"></div></td>
                  <td class="weekend"><div class="gantt-bar-planned"></div></td>
                  <td class="sunday"></td>
                  <td colspan="2"><div class="gantt-bar-planned"></div></td>
                  <td rowspan="2" class="progress-info">0%</td>
                </tr>
                <tr>
                  <td class="bg-light">実績</td>
                  <td class="weekend"></td>
                  <td class="sunday"></td>
                  <td colspan="7"></td>
                  <td class="sunday"></td>
                  <td class="today-col"></td>
                  <td colspan="21"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- フッター -->
  <div id="footer-container"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- カスタムスクリプト -->
  <script src="../style.js"></script>
  <script>
    fetch('user_header.html')
      .then(res => res.text())
      .then(html => document.getElementById('header-container').innerHTML = html);
    fetch('user_footer.html')
      .then(res => res.text())
      .then(html => document.getElementById('footer-container').innerHTML = html);
  </script>
</body>
</html>
