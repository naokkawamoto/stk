<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>その他の調査 - リノベーション管理システム</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Hiragino Sans', 'ヒラギノ角ゴシック', 'Yu Gothic', '游ゴシック', sans-serif;
            background-color: #f8f9fa;
        }
        .mobile-container {
            max-width: 375px;
            margin: 0 auto;
            min-height: 667px;
            background: #f8f9fa;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .inspection-header {
            background: #28a745;
            color: white;
            padding: 15px;
            border-radius: 0;
        }
        .main-content {
            background: #f8f9fa;
            min-height: 400px;
            padding: 20px;
        }
        .inspection-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .inspection-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s;
            cursor: pointer;
        }
        .inspection-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }

        /* 調査済み状態のスタイル */
        .inspection-item[data-status="completed"] {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border-left: 4px solid #28a745;
        }

        .inspection-item[data-status="completed"] .item-icon {
            background: #28a745 !important;
            color: white;
        }

        .inspection-item[data-status="completed"] .action-btn {
            background: #28a745 !important;
            color: white;
            border: none;
        }

        .inspection-item[data-status="completed"] .action-btn:hover {
            background: #218838 !important;
        }

        /* 調査中状態のスタイル */
        .inspection-item[data-status="in-progress"] {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 4px solid #ffc107;
        }

        .inspection-item[data-status="in-progress"] .item-icon {
            background: #ffc107 !important;
            color: #212529;
        }
        .item-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
        }
        .item-content {
            flex: 1;
        }
        .item-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }
        .item-description {
            font-size: 12px;
            color: #666;
        }
        .item-actions {
            display: flex;
            gap: 8px;
        }
        .action-btn {
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            background: white;
            color: #495057;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .action-btn:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }
        .action-btn.btn-primary {
            background: #007bff;
            border-color: #007bff;
            color: white;
        }
        .action-btn.btn-primary:hover {
            background: #0056b3;
            border-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <!-- ヘッダー -->
        <div class="inspection-header">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                    <i class="bi bi-arrow-left me-2" style="font-size: 18px; cursor: pointer;" onclick="location.href='user_project_detail_investigate_edit.html'"></i>
                    <div>
                        <h5 class="mb-0">その他の調査</h5>
                        <small class="opacity-75">進捗: <span id="progressCount">0/12</span></small>
                    </div>
                </div>
            </div>
        </div>

        <!-- メインコンテンツ -->
        <div class="main-content">
            <div class="inspection-items">
                <!-- 用途地域 -->
                <div class="inspection-item" data-item="用途地域" data-status="pending" onclick="openInspectionItem('用途地域')">
                    <div class="item-icon" style="background: #007bff;">用</div>
                    <div class="item-content">
                        <div class="item-title">用途地域</div>
                        <div class="item-description">建築基準法による用途地域の指定状況</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 防火地域 -->
                <div class="inspection-item" data-item="防火地域" data-status="pending" onclick="openInspectionItem('防火地域')">
                    <div class="item-icon" style="background: #dc3545;">防</div>
                    <div class="item-content">
                        <div class="item-title">防火地域</div>
                        <div class="item-description">防火地域・準防火地域の指定状況</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 基礎のコンクリート、鉄筋JIS適 -->
                <div class="inspection-item" data-item="基礎のコンクリート、鉄筋JIS適" data-status="pending" onclick="openInspectionItem('基礎のコンクリート、鉄筋JIS適')">
                    <div class="item-icon" style="background: #28a745;">基</div>
                    <div class="item-content">
                        <div class="item-title">基礎のコンクリート、鉄筋JIS適</div>
                        <div class="item-description">基礎構造材のJIS適合性調査</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 石綿 -->
                <div class="inspection-item" data-item="石綿" data-status="pending" onclick="openInspectionItem('石綿')">
                    <div class="item-icon" style="background: #ffc107;">石</div>
                    <div class="item-content">
                        <div class="item-title">石綿</div>
                        <div class="item-description">石綿含有建材の有無調査</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- クロルピリホス -->
                <div class="inspection-item" data-item="クロルピリホス" data-status="pending" onclick="openInspectionItem('クロルピリホス')">
                    <div class="item-icon" style="background: #17a2b8;">ク</div>
                    <div class="item-content">
                        <div class="item-title">クロルピリホス</div>
                        <div class="item-description">クロルピリホス系防蟻剤の使用状況</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- ホルムアルデヒド -->
                <div class="inspection-item" data-item="ホルムアルデヒド" data-status="pending" onclick="openInspectionItem('ホルムアルデヒド')">
                    <div class="item-icon" style="background: #6f42c1;">ホ</div>
                    <div class="item-content">
                        <div class="item-title">ホルムアルデヒド</div>
                        <div class="item-description">ホルムアルデヒド含有建材の調査</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 壁面線の指定状況 -->
                <div class="inspection-item" data-item="壁面線の指定状況" data-status="pending" onclick="openInspectionItem('壁面線の指定状況')">
                    <div class="item-icon" style="background: #fd7e14;">壁</div>
                    <div class="item-content">
                        <div class="item-title">壁面線の指定状況</div>
                        <div class="item-description">建築基準法による壁面線の指定</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 道路内建築 -->
                <div class="inspection-item" data-item="道路内建築" data-status="pending" onclick="openInspectionItem('道路内建築')">
                    <div class="item-icon" style="background: #20c997;">道</div>
                    <div class="item-content">
                        <div class="item-title">道路内建築</div>
                        <div class="item-description">道路内建築物の許可状況</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 外壁後退距離 -->
                <div class="inspection-item" data-item="外壁後退距離" data-status="pending" onclick="openInspectionItem('外壁後退距離')">
                    <div class="item-icon" style="background: #e83e8c;">外</div>
                    <div class="item-content">
                        <div class="item-title">外壁後退距離</div>
                        <div class="item-description">道路境界線からの外壁後退距離</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 高度地区内の建築物 -->
                <div class="inspection-item" data-item="高度地区内の建築物" data-status="pending" onclick="openInspectionItem('高度地区内の建築物')">
                    <div class="item-icon" style="background: #6c757d;">高</div>
                    <div class="item-content">
                        <div class="item-title">高度地区内の建築物</div>
                        <div class="item-description">高度地区制限の適用状況</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 地方公共団体の条例による制限 -->
                <div class="inspection-item" data-item="地方公共団体の条例による制限" data-status="pending" onclick="openInspectionItem('地方公共団体の条例による制限')">
                    <div class="item-icon" style="background: #343a40;">条</div>
                    <div class="item-content">
                        <div class="item-title">地方公共団体の条例による制限</div>
                        <div class="item-description">市町村条例による建築制限</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>

                <!-- 仮設計画 -->
                <div class="inspection-item" data-item="仮設計画" data-status="pending" onclick="openInspectionItem('仮設計画')">
                    <div class="item-icon" style="background: #495057;">仮</div>
                    <div class="item-content">
                        <div class="item-title">仮設計画</div>
                        <div class="item-description">仮設建築物の計画状況</div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn btn-primary">調査</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 進捗管理
        let inspectionProgress = {
            total: 12,
            completed: 0,
            inProgress: 0
        };

        // 進捗表示を更新
        function updateProgress() {
            const completed = document.querySelectorAll('[data-status="completed"]').length;
            const inProgress = document.querySelectorAll('[data-status="in-progress"]').length;
            const progressCount = document.getElementById('progressCount');
            progressCount.textContent = `${completed}/12`;
        }

        // 項目の状態を変更
        function updateItemStatus(itemName, status) {
            const item = document.querySelector(`[data-item="${itemName}"]`);
            if (item) {
                item.setAttribute('data-status', status);
                const button = item.querySelector('.action-btn');
                
                if (status === 'completed') {
                    button.textContent = '調査済み';
                    button.classList.remove('btn-primary');
                    button.classList.add('btn-success');
                } else if (status === 'in-progress') {
                    button.textContent = '調査中';
                    button.classList.remove('btn-primary');
                    button.classList.add('btn-warning');
                } else {
                    button.textContent = '調査';
                    button.classList.remove('btn-success', 'btn-warning');
                    button.classList.add('btn-primary');
                }
                
                updateProgress();
            }
        }

        // 点検項目を開く関数
        function openInspectionItem(itemName) {
            console.log(`${itemName}の調査を開始します`);
            
            // 各項目の詳細調査モーダルを表示
            switch(itemName) {
                case '用途地域':
                    showUseDistrictModal();
                    break;
                case '防火地域':
                    showFireDistrictModal();
                    break;
                case '基礎のコンクリート、鉄筋JIS適':
                    showFoundationJISModal();
                    break;
                case '石綿':
                    showAsbestosModal();
                    break;
                case 'クロルピリホス':
                    showChlorpyrifosModal();
                    break;
                case 'ホルムアルデヒド':
                    showFormaldehydeModal();
                    break;
                case '壁面線の指定状況':
                    showWallLineModal();
                    break;
                case '道路内建築':
                    showRoadBuildingModal();
                    break;
                case '外壁後退距離':
                    showWallRetreatModal();
                    break;
                case '高度地区内の建築物':
                    showHeightDistrictModal();
                    break;
                case '地方公共団体の条例による制限':
                    showOrdinanceModal();
                    break;
                case '仮設計画':
                    showTemporaryPlanModal();
                    break;
                default:
                    alert(`${itemName}の調査機能は今後実装予定です`);
            }
        }

        // 用途地域調査モーダル
        function showUseDistrictModal() {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">用途地域調査</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label class="form-label">兼用用途の有無</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="dualUse" id="dualUseYes" value="あり">
                                        <label class="form-check-label" for="dualUseYes">あり</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="dualUse" id="dualUseNo" value="なし">
                                        <label class="form-check-label" for="dualUseNo">なし</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="useDistrictDetails" style="display: none;">
                                <h6 class="mb-3">用途地域詳細</h6>
                                <div class="row mb-3">
                                    <div class="col-6">
                                        <label class="form-label">①用途地域</label>
                                        <select class="form-select" id="districtType1">
                                            <option value="住居地域">住居地域</option>
                                            <option value="商業地域">商業地域</option>
                                            <option value="工業地域">工業地域</option>
                                        </select>
                                    </div>
                                    <div class="col-3">
                                        <label class="form-label">建蔽率(%)</label>
                                        <input type="number" class="form-control" id="buildingRatio1">
                                    </div>
                                    <div class="col-3">
                                        <label class="form-label">容積率(%)</label>
                                        <input type="number" class="form-control" id="volumeRatio1">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-6">
                                        <label class="form-label">②用途地域</label>
                                        <select class="form-select" id="districtType2">
                                            <option value="住居地域">住居地域</option>
                                            <option value="商業地域">商業地域</option>
                                            <option value="工業地域">工業地域</option>
                                        </select>
                                    </div>
                                    <div class="col-3">
                                        <label class="form-label">建蔽率(%)</label>
                                        <input type="number" class="form-control" id="buildingRatio2">
                                    </div>
                                    <div class="col-3">
                                        <label class="form-label">容積率(%)</label>
                                        <input type="number" class="form-control" id="volumeRatio2">
                                    </div>
                                </div>
                                <div class="alert alert-info">
                                    <strong>合計:</strong> 建蔽率 <span id="totalBuildingRatio">0</span>% 容積率 <span id="totalVolumeRatio">0</span>%
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">法48①～⑭ 兼用用途の有無及び当該用途に供する床面積</label>
                                <select class="form-select" id="law48">
                                    <option value="適合">適合</option>
                                    <option value="不適合">不適合</option>
                                    <option value="不明">不明</option>
                                    <option value="区域外">区域外</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">調査結果</label>
                                <div class="d-flex gap-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="useDistrictResult" id="useDistrictResultYes" value="あり">
                                        <label class="form-check-label" for="useDistrictResultYes">あり</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="useDistrictResult" id="useDistrictResultNo" value="なし">
                                        <label class="form-check-label" for="useDistrictResultNo">なし</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                            <button type="button" class="btn btn-primary" onclick="saveUseDistrict()">保存</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();

            // 兼用用途の有無による表示切り替え
            document.querySelectorAll('input[name="dualUse"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const details = document.getElementById('useDistrictDetails');
                    if (this.value === 'なし') {
                        details.style.display = 'block';
                    } else {
                        details.style.display = 'none';
                    }
                });
            });

            // 合計計算
            ['buildingRatio1', 'buildingRatio2', 'volumeRatio1', 'volumeRatio2'].forEach(id => {
                document.getElementById(id).addEventListener('input', calculateTotals);
            });

            function calculateTotals() {
                const building1 = parseFloat(document.getElementById('buildingRatio1').value) || 0;
                const building2 = parseFloat(document.getElementById('buildingRatio2').value) || 0;
                const volume1 = parseFloat(document.getElementById('volumeRatio1').value) || 0;
                const volume2 = parseFloat(document.getElementById('volumeRatio2').value) || 0;
                
                document.getElementById('totalBuildingRatio').textContent = building1 + building2;
                document.getElementById('totalVolumeRatio').textContent = volume1 + volume2;
            }

            modal.addEventListener('hidden.bs.modal', () => {
                document.body.removeChild(modal);
            });
        }

        // 防火地域調査モーダル
        function showFireDistrictModal() {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">防火地域調査</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label class="form-label">防火地域</label>
                                <select class="form-select" id="fireDistrictType">
                                    <option value="準防火地域">準防火地域</option>
                                    <option value="防火地域">防火地域</option>
                                    <option value="22条地域">22条地域</option>
                                    <option value="指定なし">指定なし</option>
                                </select>
                            </div>

                            <div id="fireDistrictDetails" style="display: none;">
                                <div class="mb-3">
                                    <label class="form-label">延べ面積</label>
                                    <div class="d-flex gap-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="floorArea" id="floorAreaOver" value="100m2超">
                                            <label class="form-check-label" for="floorAreaOver">100m2超</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="floorArea" id="floorAreaUnder" value="100m2以下">
                                            <label class="form-check-label" for="floorAreaUnder">100m2以下</label>
                                        </div>
                                    </div>
                                </div>

                                <div id="buildingStructureDetails" style="display: none;">
                                    <div class="mb-3">
                                        <label class="form-label">建物構造</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="buildingStructure" id="structure2" value="2階建て以上">
                                                <label class="form-check-label" for="structure2">2階建て以上</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="buildingStructure" id="structure3" value="3階建て以上">
                                                <label class="form-check-label" for="structure3">3階建て以上</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="fireResistanceDetails" style="display: none;">
                                        <div class="mb-3">
                                            <label class="form-label">耐火建築物または準耐火建築物</label>
                                            <div class="d-flex gap-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="fireResistance" id="fireResistanceYes" value="適合">
                                                    <label class="form-check-label" for="fireResistanceYes">適合</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="fireResistance" id="fireResistanceNo" value="不適合">
                                                    <label class="form-check-label" for="fireResistanceNo">不適合</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                            <button type="button" class="btn btn-primary" onclick="saveFireDistrict()">保存</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();

            // 防火地域タイプによる表示切り替え
            document.getElementById('fireDistrictType').addEventListener('change', function() {
                const details = document.getElementById('fireDistrictDetails');
                if (this.value === '防火地域') {
                    details.style.display = 'block';
                } else {
                    details.style.display = 'none';
                }
            });

            // 延べ面積による表示切り替え
            document.querySelectorAll('input[name="floorArea"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const details = document.getElementById('buildingStructureDetails');
                    details.style.display = 'block';
                });
            });

            // 建物構造による表示切り替え
            document.querySelectorAll('input[name="buildingStructure"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const details = document.getElementById('fireResistanceDetails');
                    details.style.display = 'block';
                });
            });

            modal.addEventListener('hidden.bs.modal', () => {
                document.body.removeChild(modal);
            });
        }

        // 仮設計画調査モーダル（最も複雑な項目）
        function showTemporaryPlanModal() {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.innerHTML = `
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">仮設計画調査</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="mb-3">仮設設備</h6>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">仮設トイレの設置可能</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="tempToilet" id="tempToiletYes" value="はい">
                                                <label class="form-check-label" for="tempToiletYes">はい</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="tempToilet" id="tempToiletNo" value="いいえ">
                                                <label class="form-check-label" for="tempToiletNo">いいえ</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">工事用ゴミ箱設置可能</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="garbageBox" id="garbageBoxYes" value="はい">
                                                <label class="form-check-label" for="garbageBoxYes">はい</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="garbageBox" id="garbageBoxNo" value="いいえ">
                                                <label class="form-check-label" for="garbageBoxNo">いいえ</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="garbageBoxSize" style="display: none;">
                                        <div class="mb-3">
                                            <label class="form-label">ゴミ箱の大きさ</label>
                                            <select class="form-select" id="garbageBoxSizeSelect">
                                                <option value="小型">小型</option>
                                                <option value="中型">中型</option>
                                                <option value="大型">大型</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">施主様用の仮設トイレ必要</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="ownerToilet" id="ownerToiletYes" value="はい">
                                                <label class="form-check-label" for="ownerToiletYes">はい</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="ownerToilet" id="ownerToiletNo" value="いいえ">
                                                <label class="form-check-label" for="ownerToiletNo">いいえ</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">施主様用の仮設風呂必要</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="ownerBath" id="ownerBathYes" value="はい">
                                                <label class="form-check-label" for="ownerBathYes">はい</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="ownerBath" id="ownerBathNo" value="いいえ">
                                                <label class="form-check-label" for="ownerBathNo">いいえ</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">施主様用の仮設キッチン必要</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="ownerKitchen" id="ownerKitchenYes" value="はい">
                                                <label class="form-check-label" for="ownerKitchenYes">はい</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="ownerKitchen" id="ownerKitchenNo" value="いいえ">
                                                <label class="form-check-label" for="ownerKitchenNo">いいえ</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <h6 class="mb-3">工事環境</h6>

                                    <div class="mb-3">
                                        <label class="form-label">工事車両の駐車スペース</label>
                                        <textarea class="form-control" id="parkingSpace" rows="3" placeholder="駐車スペースの詳細を記入してください"></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">仮設足場の設置可能</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="scaffolding" id="scaffoldingYes" value="はい">
                                                <label class="form-check-label" for="scaffoldingYes">はい</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="scaffolding" id="scaffoldingNo" value="いいえ">
                                                <label class="form-check-label" for="scaffoldingNo">いいえ</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">空中障がい物が有無</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="airObstacle" id="airObstacleYes" value="あり">
                                                <label class="form-check-label" for="airObstacleYes">あり</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="airObstacle" id="airObstacleNo" value="なし">
                                                <label class="form-check-label" for="airObstacleNo">なし</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="airObstacleDetails" style="display: none;">
                                        <div class="mb-3">
                                            <label class="form-label">空中障がい物の種類</label>
                                            <select class="form-select" id="airObstacleType">
                                                <option value="電線">電線</option>
                                                <option value="ケーブルテレビ">ケーブルテレビ</option>
                                                <option value="電話回線">電話回線</option>
                                                <option value="インターネット">インターネット</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">越境</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="encroachment" id="encroachmentYes" value="あり">
                                                <label class="form-check-label" for="encroachmentYes">あり</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="encroachment" id="encroachmentNo" value="なし">
                                                <label class="form-check-label" for="encroachmentNo">なし</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="encroachmentDetails" style="display: none;">
                                        <div class="mb-3">
                                            <label class="form-label">越境の種類</label>
                                            <select class="form-select" id="encroachmentType">
                                                <option value="植栽">植栽</option>
                                                <option value="建物">建物</option>
                                                <option value="工作物">工作物</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">近隣環境メモ</label>
                                        <textarea class="form-control" id="neighborhoodMemo" rows="3" placeholder="近隣環境について記入してください"></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">調査結果</label>
                                        <div class="d-flex gap-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="tempPlanResult" id="tempPlanResultYes" value="あり">
                                                <label class="form-check-label" for="tempPlanResultYes">あり</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="tempPlanResult" id="tempPlanResultNo" value="なし">
                                                <label class="form-check-label" for="tempPlanResultNo">なし</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                            <button type="button" class="btn btn-primary" onclick="saveTemporaryPlan()">保存</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();

            // ゴミ箱設置可能による表示切り替え
            document.querySelectorAll('input[name="garbageBox"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const details = document.getElementById('garbageBoxSize');
                    if (this.value === 'はい') {
                        details.style.display = 'block';
                    } else {
                        details.style.display = 'none';
                    }
                });
            });

            // 空中障がい物による表示切り替え
            document.querySelectorAll('input[name="airObstacle"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const details = document.getElementById('airObstacleDetails');
                    if (this.value === 'あり') {
                        details.style.display = 'block';
                    } else {
                        details.style.display = 'none';
                    }
                });
            });

            // 越境による表示切り替え
            document.querySelectorAll('input[name="encroachment"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const details = document.getElementById('encroachmentDetails');
                    if (this.value === 'あり') {
                        details.style.display = 'block';
                    } else {
                        details.style.display = 'none';
                    }
                });
            });

            modal.addEventListener('hidden.bs.modal', () => {
                document.body.removeChild(modal);
            });
        }

        // 他の調査項目のモーダル（簡易版）
        function showFoundationJISModal() {
            showSimpleModal('基礎のコンクリート、鉄筋JIS適調査', [
                { type: 'text', label: '確認書類名', id: 'documentName' },
                { type: 'radio', label: '書類の交付時期', name: 'deliveryPeriod', options: ['平成11年5月1日以降', '平成11年4月30日以前'] },
                { type: 'select', label: '法37 建築材料', id: 'law37', options: ['適合', '不適合', '不明'] }
            ], '基礎のコンクリート、鉄筋JIS適');
        }

        function showAsbestosModal() {
            showSimpleModal('石綿調査', [
                { type: 'radio', label: '法28の2二 石綿の吹付けの有無', name: 'asbestos', options: ['あり', 'なし'] },
                { type: 'select', label: '適合性', id: 'asbestosCompliance', options: ['適合', '不適合', '不明'] }
            ], '石綿');
        }

        function showChlorpyrifosModal() {
            showSimpleModal('クロルピリホス調査', [
                { type: 'radio', label: '法28の2三 クロルピリホス添加（5年以上経過している場合）', name: 'chlorpyrifos', options: ['あり', 'なし'] },
                { type: 'select', label: '適合性', id: 'chlorpyrifosCompliance', options: ['適合', '不適合', '不明'] }
            ], 'クロルピリホス');
        }

        function showFormaldehydeModal() {
            showSimpleModal('ホルムアルデヒド調査', [
                { type: 'radio', label: '法28の2三 ホルムアルデヒドの使用の有無（５年以上経過）', name: 'formaldehyde', options: ['あり', 'なし'] },
                { type: 'select', label: '適合性', id: 'formaldehydeCompliance', options: ['適合', '不適合', '不明'] }
            ], 'ホルムアルデヒド');
        }

        function showWallLineModal() {
            showSimpleModal('壁面線の指定状況調査', [
                { type: 'select', label: '法47 壁面線の制限', id: 'wallLine', options: ['適合', '不適合', '不明', '区域外'] }
            ], '壁面線の指定状況');
        }

        function showRoadBuildingModal() {
            showSimpleModal('道路内建築調査', [
                { type: 'textarea', label: '条例等による制限（確認検査機関等に問い合わせ）', id: 'roadBuildingOrdinance' },
                { type: 'select', label: '法44① 道路内建築', id: 'law44', options: ['適合', '不適合', '不明', '区域外'] }
            ], '道路内建築');
        }

        function showWallRetreatModal() {
            showSimpleModal('外壁後退距離調査', [
                { type: 'textarea', label: '条例等による制限（確認検査機関等に問い合わせ）', id: 'wallRetreatOrdinance' },
                { type: 'select', label: '法54① 外壁後退距離', id: 'law54', options: ['適合', '不適合', '不明', '区域外'] }
            ], '外壁後退距離');
        }

        function showHeightDistrictModal() {
            showSimpleModal('高度地区内の建築物調査', [
                { type: 'textarea', label: '条例等による制限（確認検査機関等に問い合わせ）', id: 'heightDistrictOrdinance' },
                { type: 'select', label: '法58① 高度地区内の建築物', id: 'law58', options: ['適合', '不適合', '不明', '区域外'] }
            ], '高度地区内の建築物');
        }

        function showOrdinanceModal() {
            showSimpleModal('地方公共団体の条例による制限調査', [
                { type: 'textarea', label: '条例等による制限（確認検査機関等に問い合わせ）', id: 'ordinanceRestriction' },
                { type: 'select', label: '法39,40,68の2他 高度地区内の建築物', id: 'law3940', options: ['適合', '不適合', '不明', '区域外'] }
            ], '地方公共団体の条例による制限');
        }

        // 簡易モーダル表示関数
        function showSimpleModal(title, fields, itemName) {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            
            let fieldsHTML = '';
            fields.forEach(field => {
                if (field.type === 'text') {
                    fieldsHTML += `
                        <div class="mb-3">
                            <label class="form-label">${field.label}</label>
                            <input type="text" class="form-control" id="${field.id}" placeholder="入力してください">
                        </div>
                    `;
                } else if (field.type === 'textarea') {
                    fieldsHTML += `
                        <div class="mb-3">
                            <label class="form-label">${field.label}</label>
                            <textarea class="form-control" id="${field.id}" rows="3" placeholder="入力してください"></textarea>
                        </div>
                    `;
                } else if (field.type === 'radio') {
                    fieldsHTML += `
                        <div class="mb-3">
                            <label class="form-label">${field.label}</label>
                            <div class="d-flex gap-3">
                    `;
                    field.options.forEach(option => {
                        fieldsHTML += `
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="${field.name}" id="${field.name}_${option}" value="${option}">
                                <label class="form-check-label" for="${field.name}_${option}">${option}</label>
                            </div>
                        `;
                    });
                    fieldsHTML += `</div></div>`;
                } else if (field.type === 'select') {
                    fieldsHTML += `
                        <div class="mb-3">
                            <label class="form-label">${field.label}</label>
                            <select class="form-select" id="${field.id}">
                    `;
                    field.options.forEach(option => {
                        fieldsHTML += `<option value="${option}">${option}</option>`;
                    });
                    fieldsHTML += `</select></div>`;
                }
            });

            // 調査結果の選択を追加
            fieldsHTML += `
                <div class="mb-3">
                    <label class="form-label">調査結果</label>
                    <div class="d-flex gap-3">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="result" id="result_${itemName}_yes" value="あり">
                            <label class="form-check-label" for="result_${itemName}_yes">あり</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="result" id="result_${itemName}_no" value="なし">
                            <label class="form-check-label" for="result_${itemName}_no">なし</label>
                        </div>
                    </div>
                </div>
            `;

            modal.innerHTML = `
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${title}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            ${fieldsHTML}
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                            <button type="button" class="btn btn-primary" onclick="saveSimpleModal('${title}', '${itemName}')">保存</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();

            modal.addEventListener('hidden.bs.modal', () => {
                document.body.removeChild(modal);
            });
        }

        // 保存関数
        function saveUseDistrict() {
            const result = document.querySelector('input[name="useDistrictResult"]:checked');
            if (result) {
                console.log('用途地域調査結果を保存しました:', result.value);
                updateItemStatus('用途地域', 'completed');
                const modal = document.querySelector('.modal');
                bootstrap.Modal.getInstance(modal).hide();
            } else {
                alert('調査結果を選択してください');
            }
        }

        function saveFireDistrict() {
            console.log('防火地域調査結果を保存しました');
            const modal = document.querySelector('.modal');
            bootstrap.Modal.getInstance(modal).hide();
        }

        function saveTemporaryPlan() {
            const result = document.querySelector('input[name="tempPlanResult"]:checked');
            if (result) {
                console.log('仮設計画調査結果を保存しました:', result.value);
                updateItemStatus('仮設計画', 'completed');
                const modal = document.querySelector('.modal');
                bootstrap.Modal.getInstance(modal).hide();
            } else {
                alert('調査結果を選択してください');
            }
        }

        function saveSimpleModal(title, itemName) {
            const result = document.querySelector('input[name="result"]:checked');
            if (result) {
                console.log(`${title}の調査結果を保存しました:`, result.value);
                updateItemStatus(itemName, 'completed');
                const modal = document.querySelector('.modal');
                bootstrap.Modal.getInstance(modal).hide();
            } else {
                alert('調査結果を選択してください');
            }
        }

        // ページ読み込み時の初期化
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
        });

        // 点検項目のホバーエフェクト
        document.querySelectorAll('.inspection-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
            });
        });

        // 調査ボタンのクリックイベント
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation(); // 親要素のクリックイベントを防止
                const item = this.closest('.inspection-item');
                const itemName = item.querySelector('.item-title').textContent;
                openInspectionItem(itemName);
            });
        });
    </script>
</body>
</html>
